name: Changelog reminder

on:
  pull_request:

jobs:
  remind:
    name: Changelog reminder
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@master

      - name: Changelog check
        uses: Zomzog/changelog-checker@v1.2.0
        with:
          fileName: CHANGELOG.md
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: Changelog Reminder
        uses: peterjgrainger/action-changelog-reminder@v1.3.0
        with:
          changelog_regex: "CHANGELOG.md"
          customPrMessage: |
            Please update the [`CHANGELOG.md`](/venkatBala/lmptools/blob/master/CHANGELOG.md) with the changes being made as part of this PR in the [Unreleased] section
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

  changelog:
    needs: remind
    uses: venkatBala/lmptools/.github/workflows/changelog.yml@"${{ env.GITHUB_HEAD_REF }}"
    secrets: inherit
